---
layout: post
title: Routing for RESTful resource
---
{% highlight ruby %}
# Routing
 map.resources :users

# console 
ruby script/console
>> rs = ActionController::Routing::Routes
>> rs.recognize_path('/users/2')
=> {:controller=>"users", :action=>"2"}
{% endhighlight %}

This is not good. After spending a good bit of time I discovered that one needs to pass :method also.

{% highlight ruby %}
ruby script/console
>> rs.recognize_path('/users/2', :method => :get)
=> {:controller=>"users", :action=>"show", :id=>"2"}
>> rs.recognize_path('/users', :method => :post)
=> {:controller=>"users", :action=>"create"}
{% endhighlight %}

That's much better. Use rs.generate to get the url from the hash.

{% highlight ruby %}
ruby script/console
>> rs.generate(:controller => 'users', :action => 'show', :id => 1)
=> "/users/1"
{% endhighlight %}

Now let's try named routes. When we try users_url we get an error. To fix that error do this.


{% highlight ruby %}
>> include ActionController::UrlWriter
>> default_url_options[:host] = 'example.com'
>> users_url
=> 'http://example.com/users'
{% endhighlight %}

Now I can use this post as reference. Every once in a while I seem to get lost.
